<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="s_banner_17_snippet" inherit_id="theme_prime.snippets" name="Banner - 17 Registry">
    <xpath expr="//div[@id='tp_snippet_banner']/div[@class='o_panel_body']" position="inside">
      <t t-snippet="theme_prime_image.s_banner_17_template"
         string="Banner - 17"
         t-thumbnail="/theme_prime_image/static/src/img/snippets/brands_thumb.png"
         data-snippet-option-class="BannerSliderOptions">
        <keywords>banner, brands, carrusel</keywords>
      </t>
    </xpath>
  </template>

  <!-- Plantilla del Banner 17 (Marcas destacadas) -->
  <template id="s_banner_17_template" name="Banner - 17 (Marcas destacadas)">
    <section class="s_banner_17 s_featured_brands py-5 o_snippet">
      <div class="container text-center">
        <!-- TÃ­tulo -->
        <h3 class="mb-4">------------ Marcas destacadas ------------</h3>

        <!-- Carrusel -->
        <div id="brandsCarousel" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <t t-set="brand_attr"
               t-value="request.env['product.attribute'].sudo().search([('name','=','Marca')], limit=1)"/>

            <!-- Agrupamos las marcas de 6 en 6 -->
            <t t-set="chunk_size" t-value="6"/>
            <t t-set="brands" t-value="brand_attr.value_ids"/>
            <t t-foreach="range(0, len(brands), chunk_size)" t-as="start" t-foreach-index="i">
              <div class="carousel-item" t-att-class="i == 0 and 'active' or ''">
                <div class="row justify-content-center">
                  <t t-foreach="brands[start:start+chunk_size]" t-as="brand" t-key="brand.id">
                    <div class="col-6 col-md-2 mb-3">
                      <a t-att-href="'/shop?attrib=%s-%s' % (brand.attribute_id.id, brand.id)"
                         class="brand-link d-block">
                        <span class="brand-name"><t t-esc="brand.name"/></span>
                      </a>
                    </div>
                  </t>
                </div>
              </div>
            </t>
          </div>

          <!-- Controles -->
          <button class="carousel-control-prev" type="button" data-bs-target="#brandsCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#brandsCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
          </button>
        </div>
      </div>

      <!-- Estilos embebidos -->
      <style>
        .s_featured_brands .brand-name {
          color: #888; /* gris por defecto */
          font-size: 1.1rem;
          font-weight: 600;
          transition: all 0.3s ease;
          display: inline-block;
          padding: 8px 12px;
          border: 1px solid transparent;
          border-radius: 4px;
        }
        .s_featured_brands .brand-link:hover .brand-name {
          color: #28a745; /* verde al pasar el mouse */
          border-color: #28a745;
          background-color: #f8f9fa;
        }
        .s_featured_brands .carousel-item {
          padding: 15px 0;
        }
      </style>
    </section>
  </template>
</odoo>
